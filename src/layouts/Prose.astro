---
import rawButtonGroup from "../components/CodeButtons.html?raw";
---

<article class="prose dark:prose-invert mx-auto lg:prose-lg prose-gruvbox" id="prose">
	<slot />
</article>

<script is:inline define:vars={{ rawButtonGroup }}>
	const applyCodeButtons = () => {
		document.querySelectorAll("figure").forEach((figure) => {
			figure.style.position = "relative";
			let buttonGroup = figure.querySelector("#button-group");
			if (!buttonGroup) {
				buttonGroup = document.createElement("div");
				figure.appendChild(buttonGroup);
				buttonGroup.outerHTML = rawButtonGroup;
				// console.log("created button group", buttonGroup);
			}
		});
	};
	document.addEventListener("astro:after-swap", applyCodeButtons);
	applyCodeButtons();
</script>

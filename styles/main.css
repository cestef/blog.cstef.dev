@import "tailwindcss";
@import "./typst.css";
@import "./gruvbox.css";
@import "./callouts.css";
@import "./syntax-theme-dark.css" (prefers-color-scheme: dark);
@import "./syntax-theme-light.css" (prefers-color-scheme: light);

@plugin "@tailwindcss/typography";

@font-face {
	font-family: "MapleMono";
	src: url("/fonts/MapleMono-Regular.ttf.woff2") format("woff2");
	font-weight: 400;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: "MapleMono";
	src: url("/fonts/MapleMono-Italic.ttf.woff2") format("woff2");
	font-weight: 400;
	font-style: italic;
	font-display: swap;
}

@font-face {
	font-family: "MapleMono";
	src: url("/fonts/MapleMono-Bold.ttf.woff2") format("woff2");
	font-weight: 700;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: "MapleMono";
	src: url("/fonts/MapleMono-BoldItalic.ttf.woff2") format("woff2");
	font-weight: 700;
	font-style: italic;
	font-display: swap;
}

@theme {
	--font-mono: "MapleMono", ui-monospace, monospace;

	--color-border: hsl(var(--border));
	--color-input: hsl(var(--input));
	--color-ring: hsl(var(--ring));
	--color-background: hsl(var(--background));
	--color-foreground: hsl(var(--foreground));
	--color-primary: hsl(var(--primary));
	--color-primary-foreground: hsl(var(--primary-foreground));
	--color-secondary: hsl(var(--secondary));
	--color-secondary-foreground: hsl(var(--secondary-foreground));
	--color-destructive: hsl(var(--destructive));
	--color-destructive-foreground: hsl(var(--destructive-foreground));
	--color-success: hsl(var(--success));
	--color-success-foreground: hsl(var(--success-foreground));
	--color-muted: hsl(var(--muted));
	--color-muted-foreground: hsl(var(--muted-foreground));
	--color-accent: hsl(var(--accent));
	--color-accent-foreground: hsl(var(--accent-foreground));
	--color-popover: hsl(var(--popover));
	--color-popover-foreground: hsl(var(--popover-foreground));
	--color-card: hsl(var(--card));
	--color-card-foreground: hsl(var(--card-foreground));

    --color-red: rgb(var(--color-red-rgb));
    --color-orange: rgb(var(--color-orange-rgb));
    --color-yellow: rgb(var(--color-yellow-rgb));
    --color-pink: rgb(var(--color-pink-rgb));
    --color-green: rgb(var(--color-green-rgb));
    --color-cyan: rgb(var(--color-cyan-rgb));
    --color-blue: rgb(var(--color-blue-rgb));
    --color-purple: rgb(var(--color-purple-rgb));

}

body {
	@apply bg-background font-mono text-foreground;
}

html {
	scrollbar-color: var(--color-ring) rgba(0, 0, 0, 0);
}

html,
body {
	height: 100%;
	overflow: hidden;
}

main {
	max-height: calc(100svh - 1rem); /* Adjust according to your header height */
	overflow-y: auto;
}

.prose {
	@apply xl:max-w-[72ch];
}

details {
	@apply border border-border px-4 py-2 my-4;
}

summary {
	@apply cursor-pointer;
}

details figure:has(pre) {
	@apply lg:mx-0;
}

figure[data-copy="true"] #copy-button {
	@apply block;
}

article,
article img {
	margin-left: auto;
	margin-right: auto;
	margin-top: 0px !important;
	margin-bottom: 0px !important;
}

.buttons-holder {
	@apply absolute top-0 right-0  text-xs text-muted-foreground bg-accent border border-muted;
}

.buttons-holder :nth-child(2) {
	@apply border-l border-muted-foreground/20 md:border-none;
}
.copy-button,
.wrap-toggle {
	@apply cursor-pointer px-2 py-1;
}

.wrap-toggle {
	@apply md:hidden;
}

pre {
	@apply relative !rounded-none;
}

pre[data-name] {
	@apply relative pt-8;
	&::before {
		content: attr(data-name);
		@apply absolute top-0 left-0 px-2 py-1 text-xs text-muted-foreground bg-accent border border-muted;
	}
}

pre,
code {
	line-height: 1.28;
}

img.emoji {
	border-radius: 0px !important;
	display: inline-block;
	height: 1em;
	width: 1em;
	margin: 0 0.05em 0 0.1em;
	vertical-align: -0.1em;
}

details > summary::marker {
	content: "[+] ";
	@apply text-muted-foreground;
}

details[open] > summary::marker {
	content: "[-] ";
	@apply text-muted;
}

details summary p {
	display: inline;
	margin: 0;
}

input {
	@apply focus:ring-0 focus:outline-none;
}

/* .goto-result:not(:last-child) {
	@apply border-b border-muted;
} */

.goto-result,
.goto-no-result {
	@apply px-2 py-1 lg:px-4 lg:py-2;
}

.goto-result:hover {
	@apply bg-background/90;
}

.goto-result.selected {
	@apply bg-primary text-primary-foreground;
}

.goto-no-result {
	@apply text-destructive;
}

#goto-popup {
	@apply opacity-0 scale-95 -translate-y-1 pointer-events-none transition-all duration-200 ease-in-out;
}

#goto-popup.active {
	@apply opacity-100 scale-100 translate-y-0 pointer-events-auto;
}

pre[data-center] {
	@apply flex items-center justify-center;
}

html[data-wrap] pre {
	@apply whitespace-pre-wrap;
}


.color-strip {
    @apply absolute h-[12.5%] w-[400%] overflow-hidden group-hover:opacity-100 flex opacity-0 transition-opacity duration-500 ease-in-out;
}

.color-block {
    width: calc(100% / 16);
    height: 100%;
}

.color-block:nth-child(1) { @apply bg-red/90; }
.color-block:nth-child(2) { @apply bg-orange/90; }
.color-block:nth-child(3) { @apply bg-yellow/90; }
.color-block:nth-child(4) { @apply bg-green/90; }
.color-block:nth-child(5) { @apply bg-cyan/90; }
.color-block:nth-child(6) { @apply bg-blue/90; }
.color-block:nth-child(7) { @apply bg-purple/90; }
.color-block:nth-child(8) { @apply bg-pink/90; }
.color-block:nth-child(9) { @apply bg-red/90; }
.color-block:nth-child(10) { @apply bg-orange/90; }
.color-block:nth-child(11) { @apply bg-yellow/90; }
.color-block:nth-child(12) { @apply bg-green/90; }
.color-block:nth-child(13) { @apply bg-cyan/90; }
.color-block:nth-child(14) { @apply bg-blue/90; }
.color-block:nth-child(15) { @apply bg-purple/90; }
.color-block:nth-child(16) { @apply bg-pink/90; }

@keyframes slide {
    0% {
        transform: translateX(0%);
    }
    100% {
        transform: translateX(-50%);
    }
}

/* Table of Contents */
.toc {
	@apply mb-6;
}

.toc details {
	@apply border border-border px-4 py-3 bg-card;
}

.toc summary {
	@apply font-medium text-sm cursor-pointer select-none text-foreground;
}

.toc ul {
	@apply mt-3 mb-0 pl-0 list-none;
}

.toc li {
	@apply my-1;
}

.toc a {
	@apply text-sm text-muted-foreground hover:text-foreground transition-colors duration-200 no-underline block py-1;
}

.toc > details > ul > li > a {
	@apply font-medium;
}

.toc ul ul {
	@apply pl-4 mt-1;
}

.toc ul ul a {
	@apply text-xs;
}

.highlight {
	@apply relative inline-block px-1 transition-colors duration-300;
	background: linear-gradient(
		90deg,
		var(--color-cyan) 0%,
		var(--color-blue) 12.5%,
		var(--color-purple) 25%,
		var(--color-pink) 37.5%,
		var(--color-red) 50%,
		var(--color-orange) 62.5%,
		var(--color-yellow) 75%,
		var(--color-green) 87.5%,
		var(--color-cyan) 100%
	);
	background-size: 200% 100%;
	background-position: 100% 0;
	background-clip: text;
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	animation: rainbow-slide 3s linear infinite;
	animation-play-state: paused;
}

.highlight:hover {
	animation-play-state: running;
}

@keyframes rainbow-slide {
	0% {
		background-position: 0% 0;
	}
	100% {
		background-position: 200% 0;
	}
}

